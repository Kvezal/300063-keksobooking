"use strict";!function(){var e="https://1510.dump.academy/keksobooking",t=function(e,t){var n=new XMLHttpRequest;n.responseType="json",n.timeout=1e4;return n.addEventListener("load",function(){var o;switch(n.status){case 200:e(n.response);break;case 400:o="Неправильный запрос";break;case 401:o="Пользователь не авторизован";break;case 404:o="Ничего не найдено";break;default:o="Неизвестный статус: "+n.status+" "+n.statusText}o&&t(o)}),n.addEventListener("error",function(){t("Произошла ошибка соединения")}),n.addEventListener("timeout",function(){t("Запрос не успел выполниться за "+n.timeout+"мс")}),n};window.backend={load:function(n,o){var d=t(n,o);d.open("GET",e+"/data"),d.send()},save:function(n,o,d){var a=t(o,d);a.open("POST",e),a.send(n)},displayError:function(e){var t=function(){document.body.removeChild(n),o.removeEventListener("click",t)},n=document.createElement("div");n.classList.add("error-message"),n.textContent=e;var o=document.createElement("button");o.classList.add("error-message__button"),o.addEventListener("click",t),o.addEventListener("keydown",function(e){e.keyCode===window.utils.ENTER_KEYCODE&&(document.body.removeChild(n),o.removeEventListener("keydown",t))}),n.appendChild(o),document.body.appendChild(n)}}}();